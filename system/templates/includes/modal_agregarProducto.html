{% load static %}
<!-- Modal Bootstrap: Agregar Producto -->
<div class="modal fade" id="agregarProductoModal" tabindex="-1" aria-labelledby="agregarProductoLabel" aria-hidden="true" data-next-code-template="{% url 'producto-next-code' 'X' %}">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content bg-dark text-white">
      <div class="modal-header">
        <h5 class="modal-title" id="agregarProductoLabel">Agregar Producto</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form id="formAgregarProducto" method="post" action="{% url 'producto-add' %}" novalidate>
        {% csrf_token %}
        <div class="modal-body">
          <div class="container-fluid">
            <div class="row g-3">
            <div class="col-md-4">
                <label for="codigo_producto" class="form-label">Código</label>
                <input
                    type="text"
                    class="form-control"
                    id="codigo_producto"
                    name="codigo_producto"
                    maxlength="4"
                    pattern="[A-Z][0-9]{3}"
                    placeholder="M001"
                    readonly
                    aria-readonly="true"
                    style="background-color:#e0e0e0;color:#b30000;font-weight:700;border-color:#c0c0c0;opacity:1;pointer-events:none;">
                <div class="form-text" style="color:#b30000;font-weight:700;"></div>
            </div>

              <div class="col-md-8">
                <label for="nombre" class="form-label">Nombre</label>
                <input type="text" class="form-control" id="nombre" name="nombre" maxlength="200" required>
              </div>

              <div class="col-12">
                <label for="descripcion" class="form-label">Descripción</label>
                <textarea class="form-control" id="descripcion" name="descripcion" rows="3" required></textarea>
              </div>

              <div class="col-md-4">
                <label for="categoria" class="form-label">Categoría</label>
                <select id="categoria" name="categoria" class="form-select" required>
                  <option value="" disabled selected>Seleccione una categoría</option>
                  {% if categorias %}
                    {% for cat in categorias %}
                      <option value="{{ cat.id_categoria }}">{{ cat.nombre }}</option>
                    {% endfor %}
                  {% endif %}
                </select>
              </div>

              <div class="col-md-4">
                <label for="precio" class="form-label">Precio</label>
                <input type="number" min="0" step="1" class="form-control" id="precio" name="precio" required>
              </div>

              <div class="col-md-4">
                <label for="cantidad" class="form-label">Cantidad</label>
                <input type="number" min="0" step="1" class="form-control" id="cantidad" name="cantidad" required value="0">
                <div class="form-text">Cantidad inicial en stock (entero &ge; 0)</div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="submit" class="btn btn-primary">Guardar producto</button>
        </div>
      </form>
    </div>
  </div>
</div>

